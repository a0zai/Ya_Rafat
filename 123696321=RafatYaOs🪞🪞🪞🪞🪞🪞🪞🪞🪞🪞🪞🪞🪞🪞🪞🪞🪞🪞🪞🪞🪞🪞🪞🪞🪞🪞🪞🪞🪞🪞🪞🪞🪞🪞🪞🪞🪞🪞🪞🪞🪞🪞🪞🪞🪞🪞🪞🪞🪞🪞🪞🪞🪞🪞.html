<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>A∞Z | Mirror Interface</title>
<style>
  body {
    margin: 0;
    background: url('IMG_9055.jpeg') no-repeat center center fixed;
    background-size: cover;
    color: #00ff33;
    font-family: "Courier New", Courier, monospace;
    overflow: hidden;
    position: relative;
  }

‎  /* غطاء التمهيد والنهاية */
  #overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.95);
    backdrop-filter: brightness(0.5);
    color: #00ff33;
    font-size: 2em;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    opacity: 1;
    transition: opacity 2s ease;
  }
  #overlay.hidden {
    opacity: 0;
    pointer-events: none;
  }

  #output {
    padding: 2em;
    backdrop-filter: brightness(0.7);
    background-color: rgba(0, 0, 0, 0.6);
    height: 100vh;
    overflow-y: auto;
  }

  .line {
    opacity: 0;
    transition: opacity 0.5s;
    margin-bottom: 0.5em;
  }

  .line.visible {
    opacity: 1;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  .cursor::after {
    content: "_";
    animation: blink 1s infinite;
  }
</style>
</head>
<body>
  <div id="overlay">Initializing...</div>
  <div id="output"></div>

<script>
async function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function typeLine(container, text, charDelay = 40) {
  const div = document.createElement("div");
  div.className = "line cursor";
  container.appendChild(div);
  await sleep(50);

  for (let char of text) {
    div.textContent += char;
    await sleep(charDelay);
  }

  div.classList.add('visible');
  div.classList.remove('cursor');
}

async function delayPrint(lines, lineDelay = 600, charDelay = 40) {
  const container = document.getElementById("output");
  for (let line of lines) {
    await typeLine(container, line, charDelay);
    await sleep(lineDelay);
  }
}

async function getIPData() {
  try {
    const response = await fetch("https://ipapi.co/json/");
    if (!response.ok) throw new Error("IP API Error");
    return await response.json();
  } catch {
    return null;
  }
}

async function getGeolocation() {
  return new Promise((resolve, reject) => {
    if (!navigator.geolocation) {
      reject("Geolocation not supported.");
    } else {
      navigator.geolocation.getCurrentPosition(
        position => resolve(position.coords),
        error => reject(error.message)
      );
    }
  });
}

async function main() {
  const overlay = document.getElementById('overlay');
  overlay.textContent = "Initializing...";
  await sleep(3000);
  overlay.classList.add('hidden');

  let ipInfo = await getIPData();
  let gpsCoords = null;
  try { gpsCoords = await getGeolocation(); } catch {}

  const now = new Date().toLocaleString();
  const ua = navigator.userAgent;
  const width = window.screen.width;
  const height = window.screen.height;
  const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

  const ip = ipInfo?.ip || "Unavailable";
  const city = ipInfo?.city || "Unavailable";
  const region = ipInfo?.region || "Unavailable";
  const country = ipInfo?.country_name || "Unavailable";
  const sessionId = btoa(ip + ua).slice(0, 16);

  const lines = [
    "[ A∞Z | Mirror Interface ]",
    "",
    "Session: " + sessionId,
    "Time: " + now,
    "IP Address: " + ip,
    "City: " + city,
    "Region: " + region,
    "Country: " + country,
    "Device: " + ua,
    "Screen: " + width + "x" + height,
    "Timezone: " + timezone,
    gpsCoords ? "Latitude: " + gpsCoords.latitude.toFixed(6) : "Latitude: Unavailable",
    gpsCoords ? "Longitude: " + gpsCoords.longitude.toFixed(6) : "Longitude: Unavailable"
  ];

  await delayPrint(lines, 800, 50);

  await sleep(1500);
  overlay.textContent = "Transmission Complete...";
  overlay.classList.remove('hidden');
  await sleep(3000);
  window.location.href = "./ORIGIN.html";
}

main();
</script>
</body>
</html>